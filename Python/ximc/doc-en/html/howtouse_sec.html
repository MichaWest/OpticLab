<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libximc: How to use with...</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libximc
   &#160;<span id="projectnumber">2.14.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to use with... </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To acquire the first skills of using the library, a simple testappeasy_C test application has been created. Languages other than C are supported using calls with conversion of arguments of the stdcall type. A simple C test application is located in the 'examples/test_C' directory, a C# project is located in 'examples/test_CSharp', on VB.NET - in 'examples/test_VBNET', for delphi 6 - in 'example/test_Delphi', for matlab - 'examples/test_MATLAB', for Java - 'examples/test_Java', for Python - 'examples/test_Python', for LabWindows - 'examples/test_LabWindows'. Libraries, header files and other necessary files are located in the directories 'ximc/win32', 'ximc/win64','ximc/macosx' and the like. The developer kit also includes already compiled examples: testapp and testappeasy x32 and x64 bits for windows and only x64 bits for macOS X, test_CSharp, test_VBNET, test_Delphi - only x32 bits, test_Java - cross-platform, test_MATLAB and test_Python do not require compilation, test_LabWindows - 64-bit build is installed by default.</p>
<dl class="section note"><dt>Note</dt><dd>SDK requires Microsoft Visual C++ Redistributable Package (provided with SDK - vcredist_x86 or vcredist_x64)</dd>
<dd>
On Linux both the libximc7_x.x.x and libximc7-dev_x.x.x target architecture in the specified order. For install packages, you can use the .deb command: dpkg -i filename.deb, where filename.deb is the name of the package (packages in Debian have the extension .deb). You must run dpkg with superuser privileges (root).</dd></dl>
<p>Testapp can be built using testapp.sln. Library must be compiled with MS Visual C++ too, mingw-library. Make sure that Microsoft Visual C++ Redistributable Package is installed.</p>
<p>Open solution examples/testapp/testapp.sln, build and run from the IDE.</p>
<p>In case of the 8SMC4-USB-Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testapp.c file before build (see enumerate_hints variable).</p>
<p>Testappeasy_C and testapp_C can be built using testappeasy_C.cbp and testapp_C.cbp respectively. Library must be compiled with MS Visual C++ too, mingw-library. Make sure that Microsoft Visual C++ Redistributable Package is installed. *</p>
<p>Open solution examples/test_C/testappeasy_C/testappeasy_C/testappeasy_C.cbp or examples/test_C/testapp_C/testapp_C.cbp, build and run from the IDE.</p>
<p>MinGW is a port of GCC to win32 platform. It's required to install MinGW package.</p>
<p>MinGW-compiled testapp can be built with MS Visual C++ or mingw library. </p>
<div class="fragment"><div class="line">mingw32-make -f Makefile.mingw all</div>
</div><!-- fragment --><p>Then copy library libximc.dll to current directory and launch testapp.exe.</p>
<p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testapp.c file before build (see enumerate_hints variable).</p>
<p>First of all, you should create a library suitable for C++ Builder. <b>Visual C++ and Builder libraries are not compatible</b> Invoke: </p>
<div class="fragment"><div class="line">implib libximc.lib libximc.def</div>
</div><!-- fragment --><p>Then compile test application: </p>
<div class="fragment"><div class="line">bcc32 -I..\..\ximc\win32 -L..\..\ximc\win32 -DWIN32 -DNDEBUG -D_WINDOWS testapp.c libximc.lib</div>
</div><!-- fragment --><p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testapp.c file before build (see enumerate_hints variable).</p>
<p>There is also an <a href="https://github.com/EPC-MSU/ximc_embarcaderro_builder_example">unsupported example</a> of using libximc in a C++ Builder project</p>
<p>testapp should be built with XCode project testapp.xcodeproj. Library is a MacOS X framework, and at example application it's bundled inside testapp.app</p>
<p>Then launch application testapp.app and check activity output in Console.app.</p>
<p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testapp.c file before build (see enumerate_hints variable). There is also <a href="https://github.com/EPC-MSU/ximc_embarcaderro_builder_example">an example of using the libximc library</a> in a C++ Builder project, <b>but it is not supported</b>.</p>
<p>Make sure that libximc (rpm or deb) is installed at your system. Installation of package should be performed with a package manager of operating system. On MacOS X a framework is provided.</p>
<p>Note that user should belong to system group which allows access to a serial port (dip or serial, for example).</p>
<p>Test application can be built with the installed library with the following script: </p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>In case of cross-compilation (target architecture differs from the current system architecture) feed -m64 or -m32 flag to compiler. On MacOS X it's needed to use -arch flag instead to build an universal binary. Please consult a compiler documentation.</p>
<p>Then launch the application as: </p>
<div class="fragment"><div class="line">make run</div>
</div><!-- fragment --><p>Note: make run on MacOS X copies a library to the current directory. If you want to use library from the custom directory please be sure to specify LD_LIBRARY_PATH or DYLD_LIBRARY_PATH to the directory with the library.</p>
<p>In case of the 8SMC4-USB-Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testapp.c file before build (see enumerate_hints variable).</p>
<p>Wrapper assembly for libximc.dll is ximc/winX/wrappers/csharp/ximcnet.dll. It is provided with two different architectures. Tested on platforms .NET from 2.0 to 4.5.1</p>
<p>Test .NET applications for Visual Studio 2013 is located at test_CSharp (for C#) and test_VBNET (for VB.NET) respectively. Open solutions and build it.</p>
<p>In case of the 8SMC4-USB-Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testapp.cs or testapp.vb file (depending on programming language) before build (see enumerate_hints variable for C# or enum_hints variable for VB).</p>
<p>Wrapper for libximc.dll is a unit ximc/winX/wrappers/delphi/ximc.pas</p>
<p>Console test application for is located at test_Delphi. Tested on Delphi 6 and only 32-bit version.</p>
<p>Just compile, place .dll near the executable and run program.</p>
<p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in test_Delphi.dpr file before build (see enum_hints variable).</p>
<p>How to run example on Linux. Go to to examples/test_Java/compiled-winX/ and run: </p>
<div class="fragment"><div class="line">java -cp /usr/share/java/libjximc.jar:test_Java.jar ru.ximc.TestJava</div>
</div><!-- fragment --><p>How to run example on Windows. Go to to examples/test_Java/compiled-winX/. Then run: </p>
<div class="fragment"><div class="line">java -classpath libjximc.jar -classpath test_Java.jar ru.ximc.TestJava</div>
</div><!-- fragment --><p>How to modify and recompile an example. Go to to examples/test_Java/compiled. Sources are embedded in a test_Java.jar. Extract them: </p>
<div class="fragment"><div class="line">jar xvf test_Java.jar ru META-INF</div>
</div><!-- fragment --><p> Then rebuild sources: </p>
<div class="fragment"><div class="line">javac -classpath /usr/share/java/libjximc.jar -Xlint ru/ximc/TestJava.java</div>
</div><!-- fragment --><p> or for Windows or MacOS X </p>
<div class="fragment"><div class="line">javac -classpath libjximc.jar -Xlint ru/ximc/TestJava.java</div>
</div><!-- fragment --><p> Then build a jar: </p>
<div class="fragment"><div class="line">jar cmf META-INF/MANIFEST.MF test_Java.jar ru</div>
</div><!-- fragment --><p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in TestJava.java file before build (see ENUM_HINTS variable).</p>
<p>Change current directory to the examples/test_Python. For correct usage of the library libximc, the example uses the file wrapper, ximc/crossplatform/wrappers/python/pyximc.py with a description of the structures of the library.</p>
<p>Before launch:</p>
<p>On MacOS X: copy library ximc/macosx/libximc.framework to the current directory.</p>
<p>On Linux: you may need to set LD_LIBRARY_PATH so Python can locate libraries with RPATH. For example, you may need: </p>
<div class="fragment"><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:`pwd`</div>
</div><!-- fragment --><p>On Windows before the start nothing needs to be done. All necessary communication and dependencies are registered in the example code. Libraries used: bindy.dll libximc.dll xiwrapper.dll. Located in the folder for the respective versions of Windows.</p>
<p>Then run: </p>
<div class="fragment"><div class="line">python test_Python.py</div>
</div><!-- fragment --><p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in test_Python.py file before launch (see enum_hints variable).</p>
<p>Sample MATLAB program testximc.m is provided at the directory examples/test_MATLAB. On windows copy <a class="el" href="ximc_8h.html" title="Header file for libximc library.">ximc.h</a>, libximc.dll, bindy.dll, xiwrapper.dll and contents of ximc/(win32,win64)/wrappers/matlab/ directory to the current directory.</p>
<p>Before launch:</p>
<p>On MacOS X: copy ximc/macosx/libximc.framework, ximc/macosx/wrappers/ximcm.h, ximc/ximc.h to the directory examples/test_MATLAB. Install XCode compatible with Matlab.</p>
<p>On Linux: install libximc*deb and libximc-dev*dev of target architecture. Then copy ximc/macosx/wrappers/ximcm.h to the directory examples/matlab. Install gcc compatible with Matlab.</p>
<p>For XCode and gcc version compability check document <a href="https://www.mathworks.com/content/dam/mathworks/mathworks-dot-com/support/sysreq/files/SystemRequirements-Release2014a_SupportedCompilers.pdf">https://www.mathworks.com/content/dam/mathworks/mathworks-dot-com/support/sysreq/files/SystemRequirements-Release2014a_SupportedCompilers.pdf</a> or similar.</p>
<p>On Windows before the start nothing needs to be done</p>
<p>Change current directory in the MATLAB to the examples/test_MATLAB. Then launch in MATLAB prompt: </p>
<div class="fragment"><div class="line">testximc</div>
</div><!-- fragment --><p>In case of the 8Eth1 Ethernet adapter usage it is necessary to set correct IP address of the Ethernet adapter in testximc.m file before launch (see enum_hints variable).</p>
<h1><a class="anchor" id="howtouse_log"></a>
Generic logging facility</h1>
<p>If you want to turn on file logging, you should run the program that uses libximc library with the "XILOG" environment variable set to desired file name. This file will be opened for writing on the first log event and will be closed when the program which uses libximc terminates. Data which is sent to/received from the controller is logged along with port open and close events.</p>
<h1><a class="anchor" id="howtouse_perm"></a>
Required permissions</h1>
<p>libximc generally does not require special permissions to work, it only needs read/write access to USB-serial ports on the system. An exception to this rule is a Windows-only "fix_usbser_sys()" function - it needs elevation and will produce null result if run as a regular user.</p>
<h1><a class="anchor" id="howtouse_cprofiles"></a>
C-profiles</h1>
<p>C-profiles are header files distributed with the libximc library. They enable one to set all controller settings for any of the supported stages with a single function call in a C/C++ program. <br/>
 You may see how to use C-profiles in the example directory "examples/test_C/testprofile_C".</p>
<h1><a class="anchor" id="howtouse_pyprofiles"></a>
Python-profiles</h1>
<p>Python-profiles this is a set of configuration functions distributed with the libximc library. They enable one to set all controller settings for any of the supported stages with a single function call in a Python program. <br/>
 You may see how to use Python-profiles in the example directory "examples/test_Python/profiletest/testpythonprofile.py". </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 22 2023 15:36:27 for libximc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
