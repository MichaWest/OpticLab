<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libximc: Как использовать с...</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libximc
   &#160;<span id="projectnumber">2.14.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Титульная&#160;страница</span></a></li>
      <li class="current"><a href="pages.html"><span>Описания</span></a></li>
      <li><a href="annotated.html"><span>Структуры&#160;данных</span></a></li>
      <li><a href="files.html"><span>Файлы</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Как использовать с... </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Для приобретения первых навыков использования библиотеки создано простое тестовое приложение testappeasy_C. <br/>
 Языки, отличные от C-подобных, поддерживаются с помощью вызовов с преобразованием аргументов типа stdcall.</p>
<dl class="section note"><dt>Заметки</dt><dd>Для работы с SDK требуется Microsoft Visual C++ Redistributable Package (поставляется с SDK, файлы vcredist_x86 или vcredist_x64).</dd>
<dd>
Для работы на Linux требуется установить оба пакета libximc7_x.x.x и libximc7-dev_x.x.x целевой архитектуры в указанном порядке. Для установки пакетов можно воспользоваться .deb командой: <div class="fragment"><div class="line">sudo dpkg -i &lt;имя_пакета&gt;.deb </div>
</div><!-- fragment --></dd></dl>
<p>Тестовое приложение может быть собрано с помощью testapp.sln. Для компиляции необходимо использовать также MS Visual C++, mingw-library.</p>
<p>Убедитесь, что Microsoft Visual C++ Redistributable Package установлен. Откройте проект examples/test_C/testapp_C/testapp.sln, выполните сборку и запустите приложение из среды разработки.</p>
<p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testapp.c перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enumerate_hints).</p>
<p>Тестовое приложение может быть собрано с помощью testappeasy_C.cbp или testapp_C.cbp. Для компиляции необходимо использовать также MS Visual C++, mingw-library.</p>
<p>Убедитесь, что Microsoft Visual C++ Redistributable Package установлен. Откройте проект examples/test_C/testappeasy_C/testappeasy_C/testappeasy_C.cbp или examples/test_C/testapp_C/testapp_C.cbp, выполните сборку и запустите приложение из среды разработки.</p>
<p>MinGW это вариант GCC для платформы win32. Требует установки пакета MinGW.</p>
<p>testapp, скомпилированный с помощью MinGW, может быть собран с MS Visual C++ или библиотеками mingw: </p>
<div class="fragment"><div class="line">mingw32-make -f Makefile.mingw all</div>
</div><!-- fragment --><p>Далее скопируйте libximc.dll в текущую директорию и запустите testapp.exe.</p>
<p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testapp.c перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enumerate_hints).</p>
<p>В первую очередь вы должны создать подходящую для C++ Builder библиотеку. <b>Библиотеки Visual C++ и Builder не совместимы</b>. Выполните: </p>
<div class="fragment"><div class="line">implib libximc.lib libximc.def</div>
</div><!-- fragment --><p>Затем скомпилируйте тестовое приложение: </p>
<div class="fragment"><div class="line">bcc32 -I..\..\ximc\win32 -L..\..\ximc\win32 -DWIN32 -DNDEBUG -D_WINDOWS testapp.c libximc.lib</div>
</div><!-- fragment --><p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testapp.c перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enumerate_hints).</p>
<p>Также существует <a href="https://github.com/EPC-MSU/ximc_embarcaderro_builder_example">пример использования библиотеки libximc</a> в проекте С++ Builder, <b>но он не поддерживается</b>.</p>
<p>testapp должен быть собран проектом XCode testapp.xcodeproj. Используйте конфигурацию Release. Библиотека поставляется в формате MacOS X framework, в той же директории находится собранное тестовое приложение testapp.app.</p>
<p>Запустите приложение testapp.app проверьте его работу в Console.app.</p>
<p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testapp.c перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enumerate_hints).</p>
<p>Убедитесь, что libximc (с помощью rpm или deb) установлена на вашей системе. Пакеты должны устанавливаться с помощью package manager'а вашей ОС. Для MacOS X предоставляется фреймворк.</p>
<p>Убедитесь, что пользователь принадлежит к группе, позволяющей доступ к COM-порту (например, dip или serial).</p>
<p>testapp может быть собран следующим образом с установленной библиотекой: </p>
<div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p>Для кросс-компиляции (архитектура целевой системы отличается от архитектуры хоста) следует передать флаг -m64 или -m32 компилятору. Для сборки universal binary на MacOS X необходимо использовать вместо этого флаг -arch. Обратитесь к документации компилятора.</p>
<p>Затем запустите приложение с помощью: </p>
<div class="fragment"><div class="line">make run</div>
</div><!-- fragment --><p>Примечание: make run на MacOS X копирует библиотеку в текущую директорию. Если вы хотите использовать библиотеку из другой директории, пожалуйста укажите в LD_LIBRARY_PATH или DYLD_LIBRARY_PATH путь к директории с библиотекой.</p>
<p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testapp.c перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enumerate_hints).</p>
<p>Для использования в .NET предлагается обертка ximc/winX/wrappers/csharp/ximcnet.dll. Она распространяется в двух различных архитектурах. Тестировалось на платформах .NET от 2.0 до 4.5.1.</p>
<p>Тестовые приложения на языке C# для Visual Studio 2013 расположены в директориях test_CSharp (для C#) и test_VBNET (для VB.NET). Откройте проекты и соберите их.</p>
<p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testapp.cs или testapp.vb (в зависимости от языка) перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enumerate_hints для C#, переменная enum_hints для VB).</p>
<p>Обертка для использования в Delphi libximc.dll предлагается как модуль ximc/winX/wrappers/pascal/ximc.pas</p>
<p>Консольное тестовое приложение размещено в директории 'test_Delphi'. Тестировалось с Delphi 6 на 32-битной системе.</p>
<p>Просто скомпилируйте, разместите .dll в директории с исполняемым примером и запустите его.</p>
<p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле test_Delphi.dpr перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная enum_hints).</p>
<p>Как запустить пример на Linux. Перейдите в examples/test_Java/compiled-winX/ и выполните </p>
<div class="fragment"><div class="line">java -cp /usr/share/java/libjximc.jar:test_Java.jar ru.ximc.TestJava</div>
</div><!-- fragment --><p>Как запустить пример на Windows. Перейдите в examples/test_Java/compiled-winX/. Запустите: </p>
<div class="fragment"><div class="line">java -classpath libjximc.jar -classpath test_Java.jar ru.ximc.TestJava</div>
</div><!-- fragment --><p>Как модифицировать и пересобрать пример. Исходный текст расположен внутри test_Java.jar. Перейдите в examples/test_Java/compiled. Распакуйте jar: </p>
<div class="fragment"><div class="line">jar xvf test_Java.jar ru META-INF</div>
</div><!-- fragment --><p> Затем пересоберите исходные тексты: </p>
<div class="fragment"><div class="line">javac -classpath /usr/share/java/libjximc.jar -Xlint ru/ximc/TestJava.java</div>
</div><!-- fragment --><p> или для Windows или MacOS X: </p>
<div class="fragment"><div class="line">javac -classpath libjximc.jar -Xlint ru/ximc/TestJava.java</div>
</div><!-- fragment --><p> Затем соберите jar: </p>
<div class="fragment"><div class="line">jar cmf MANIFEST.MF test_Java.jar ru</div>
</div><!-- fragment --><p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле TestJava.java перед сборкой нужно прописать IP адрес Ethernet-адаптера (переменная ENUM_HINTS).</p>
<p>Измените текущую директорию на examples/test_Python. Для корректного использования библиотеки libximc, в примере используется файл обертка, ximc/crossplatform/wrappers/python/pyximc.py с описанием структур библиотеки.</p>
<p>Перед запуском:</p>
<p>На MacOS X: скопируйте библиотеку ximc/macosx/libximc.framework в текущую директорию.</p>
<p>На Linux: может понадобиться установить LD_LIBRARY_PATH, чтобы Python мог найти библиотеки с RPATH. Например, запустите: </p>
<div class="fragment"><div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:`pwd`</div>
</div><!-- fragment --><p>На Windows: перед запуском ничего делать не нужно. Все необходимые связи и зависимости прописаны в коде примера. Используются библиотеки: bindy.dll, libximc.dll, xiwrapper.dll. Расположенные в папке для соответствующих версий Windows.</p>
<p>Запустите: </p>
<div class="fragment"><div class="line">python test_Python.py</div>
</div><!-- fragment --><p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле test_Python.py перед запуском нужно прописать IP адрес Ethernet-адаптера (переменная enum_hints).</p>
<p>Тестовая программа на MATLAB testximc.m располагается в директории examples/test_MATLAB.</p>
<p>Перед запуском:</p>
<p>На MacOS X: скопируйте ximc/macosx/libximc.framework, ximc/macosx/wrappers/ximcm.h, ximc/ximc.h в директорию examples/test_MATLAB. Установите XCode, совместимый с Matlab</p>
<p>На Linux: установите libximc*deb и libximc-dev*deb нужной архитектуры. Далее скопируйте ximc/macosx/wrappers/ximcm.h в директорию examples/matlab. Установите gcc, совместимый с Matlab.</p>
<p>Для проверки совместимых XCode и gcc проверьте документы <a href="https://www.mathworks.com/content/dam/mathworks/mathworks-dot-com/support/sysreq/files/SystemRequirements-Release2014a_SupportedCompilers.pdf">https://www.mathworks.com/content/dam/mathworks/mathworks-dot-com/support/sysreq/files/SystemRequirements-Release2014a_SupportedCompilers.pdf</a> или похожие.</p>
<p>На Windows: перед запуском ничего делать не нужно</p>
<p>Измените текущую директорию в MATLAB на examples/test_MATLAB. Затем запустите в MATLAB: </p>
<div class="fragment"><div class="line">testximc</div>
</div><!-- fragment --><p>В случае, если планируется использовать Ethernet-адаптер 8Eth1, в файле testximc.m перед запуском нужно прописать IP адрес Ethernet-адаптера (переменная enum_hints).</p>
<h1><a class="anchor" id="howtouse_log"></a>
Логирование в файл</h1>
<p>Если программа, использующая libximc, запущена с установленной переменной окружения XILOG, то это включит логирование в файл. Значение переменной XILOG будет использовано как имя файла. Файл будет открыт на запись при первом событии лога и закрыт при завершении программы, использующей libximc. В лог записываются события отправки данных в контроллер и приема данных из контроллера, а также открытия и закрытия порта.</p>
<h1><a class="anchor" id="howtouse_perm"></a>
Требуемые права доступа</h1>
<p>Библиотеке не требуются особые права для выполнения, но нужены права доступа на чтение-запись в USB-COM устройства в системе. Исключением из этого правила является функция только для ОС Windows "fix_usbser_sys()" - если процесс использующий библиотеку не имеет повышенных прав, то при вызове этой функции программная переустановка устройства не будет работать.</p>
<h1><a class="anchor" id="howtouse_cprofiles"></a>
Си-профили</h1>
<p>Си-профили это набор заголовочных файлов, распространяемых вместе с библиотекой libximc. Они позволяют в программе на языке C/C++ загрузить в контроллер настройки одной из поддерживаемых подвижек вызовом всего одной функции. Пример использования си-профилей вы можете посмотреть в директории примеров "examples/test_C/testprofile_C".</p>
<h1><a class="anchor" id="howtouse_pyprofiles"></a>
Python-профили</h1>
<p>Python-профили это набор конфигурационных функций, распространяемых вместе с библиотекой libximc. Они позволяют в программе на языке Python загрузить в контроллер настройки одной из поддерживаемых подвижек вызовом всего одной функции. <br/>
 Пример использования python-профилей вы можете посмотреть в директории примеров "examples/test_Python/profiletest/testpythonprofile.py". </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Документация по libximc. Последние изменения: Чт 22 Июн 2023 15:36:31. Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
